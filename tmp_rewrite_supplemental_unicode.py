import hashlib
import json
from pathlib import Path

DOC_HASH = '57b1bc3b0bdb89d8266fe831c9a3e7cab2958861ae8a3590a68d96a56feb90c4'
base = Path('data/derived/supplemental_ocr') / DOC_HASH
base.mkdir(parents=True, exist_ok=True)

# Rewrite the supplemental OCR payloads using ASCII-only \u escapes so the text is true Unicode.

def write_payload(filename: str, lines: list[str]):
    joined = '\n'.join(lines).strip() + '\n'
    img_sha = hashlib.sha256(joined.encode('utf-8')).hexdigest()
    payload = {
        'source_file_hash': DOC_HASH,
        'image_sha256': img_sha,
        'filename': filename,
        'lines': [ln for ln in lines if ln.strip()],
    }
    out = base / f"{img_sha[:16]}_{filename}.json"
    out.write_text(json.dumps(payload, ensure_ascii=False, indent=2), encoding='utf-8')
    return out

# Remove old files we previously wrote for these screenshots (best-effort)
for p in base.glob('*_intellectual_*'):
    try:
        p.unlink()
    except Exception:
        pass

# --- Screenshot 1: 4. Ø§Ù„ØªØ¬Ø±Ø¯ / Ø§Ù„Ø§Ø³ØªÙ‚Ù„Ø§Ù„ÙŠØ© ---
lines_1 = [
    "4. \u0627\u0644\u062a\u062c\u0631\u062f / \u0627\u0644\u0627\u0633\u062a\u0642\u0644\u0627\u0644\u064a\u0629",
    "\u0627\u0644\u0645\u0641\u0647\u0648\u0645:",
    "\u062c\u0631\u0651\u062f \u0627\u0644\u0634\u064a\u0621: \u0642\u0634\u0631\u0647 \u0648\u0646\u0632\u0639 \u0639\u0646\u0647 \u0645\u0627 \u0639\u0644\u064a\u0647.",
    "\u0648\u0627\u062e\u062a\u0644\u0641 \u0627\u0644\u0645\u0641\u0633\u0631\u0648\u0646\u060c \u0641\u0645\u0646\u0647\u0645 \u0645\u0646 \u064a\u0631\u0649 \u0627\u0641\u062a\u0642\u0627\u0631 \u0627\u0644\u0643\u0644\u0627\u0645 \u0625\u0644\u0649 \u0627\u0644\u062a\u0642\u062f\u064a\u0631\u060c \u0648\u0645\u0646\u0647\u0645 \u0645\u0646 \u064a\u0631\u0649 \u0627\u0633\u062a\u0642\u0644\u0627\u0644 \u0627\u0644\u0643\u0644\u0627\u0645 \u0648\u0639\u062f\u0645 \u0627\u062d\u062a\u064a\u0627\u062c\u0647 \u0625\u0644\u0649 \u0630\u0644\u0643 \u0627\u0644\u062a\u0642\u062f\u064a\u0631... \u0641\u062d\u0645\u0644\u062a \u0627\u0644\u0622\u064a\u0629 \u0639\u0644\u0649 \u0627\u0644\u0627\u0633\u062a\u0642\u0644\u0627\u0644.",
    "\u0627\u0644\u062a\u0623\u0635\u064a\u0644",
    "\u0642\u0627\u0644 \u062a\u0639\u0627\u0644\u0649:",
    "\u0648\u0644\u0627 \u062a\u0632\u0631 \u0648\u0627\u0632\u0631\u0629 \u0648\u0632\u0631 \u0623\u062e\u0631\u0649 [\u0627\u0644\u0623\u0646\u0639\u0627\u0645: 164]",
    "\u0641\u0645\u0646 \u064a\u0639\u0645\u0644 \u0645\u062b\u0642\u0627\u0644 \u0630\u0631\u0629 \u062e\u064a\u0631\u0627 \u064a\u0631\u0647\u060c \u0648\u0645\u0646 \u064a\u0639\u0645\u0644 \u0645\u062b\u0642\u0627\u0644 \u0630\u0631\u0629 \u0634\u0631\u0627 \u064a\u0631\u0647 [\u0627\u0644\u0632\u0644\u0632\u0644\u0629: 7\u20138]",
    "\u0648\u0642\u0627\u0644 \u0635\u0644\u0649 \u0627\u0644\u0644\u0647 \u0639\u0644\u064a\u0647 \u0648\u0633\u0644\u0645:",
    "\u0643\u0644\u0643\u0645 \u0631\u0627\u0639\u060c \u0648\u0643\u0644\u0643\u0645 \u0645\u0633\u0624\u0648\u0644 \u0639\u0646 \u0631\u0639\u064a\u062a\u0647 (\u0645\u062a\u0641\u0642 \u0639\u0644\u064a\u0647)",
    "\u0644\u0627 \u062a\u0643\u0646 \u0625\u0645\u0639\u0629\u060c \u062a\u0642\u0648\u0644: \u0625\u0646 \u0623\u062d\u0633\u0646 \u0627\u0644\u0646\u0627\u0633 \u0623\u062d\u0633\u0646\u062a\u060c \u0648\u0625\u0646 \u0623\u0633\u0627\u0624\u0648\u0627 \u0623\u0633\u0623\u062a\u060c \u0648\u0644\u0643\u0646 \u0648\u0637\u0646\u0648\u0627 \u0623\u0646\u0641\u0633\u0643\u0645 \u0625\u0646 \u0623\u062d\u0633\u0646 \u0627\u0644\u0646\u0627\u0633 \u0623\u0646 \u062a\u062d\u0633\u0646\u0648\u0627\u060c \u0648\u0625\u0646 \u0623\u0633\u0627\u0624\u0648\u0627 \u0623\u0646 \u0644\u0627 \u062a\u0638\u0644\u0645\u0648\u0627. (\u0631\u0648\u0627\u0647 \u0627\u0644\u062a\u0631\u0645\u0630\u064a 2007)",
]

# --- Screenshot 2: 5. Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø± / Ø§Ù„Ø§Ù…ØªØ­Ø§Ù† / Ø§Ù„Ø§Ø¨ØªÙ„Ø§Ø¡ + Ø«Ø§Ù†ÙŠØ§ Ø§Ù„Ø­ÙƒÙ…Ø© ---
lines_2 = [
    "5. \u0627\u0644\u0627\u062e\u062a\u0628\u0627\u0631/ \u0627\u0644\u0627\u0645\u062a\u062d\u0627\u0646/ \u0627\u0644\u0627\u0628\u062a\u0644\u0627\u0621",
    "\u0627\u0644\u0645\u0641\u0647\u0648\u0645:",
    "\u0648\u0627\u0644\u0628\u0644\u0627\u0621: \u0627\u0644\u0627\u062e\u062a\u0628\u0627\u0631 \u064a\u0643\u0648\u0646 \u0628\u0627\u0644\u062e\u064a\u0631 \u0648\u0627\u0644\u0634\u0631... \u0648\u0627\u0628\u062a\u0644\u0627\u0647: \u0627\u062e\u062a\u0628\u0631\u0647.",
    "\u0627\u0644\u0645\u062d\u0646\u0629: \u0627\u0644\u0627\u062e\u062a\u0628\u0627\u0631 \u0648\u0627\u0644\u0627\u0645\u062a\u062d\u0627\u0646.",
    "\u0633\u0645\u064a \u0627\u0644\u062a\u0643\u0644\u064a\u0641 \u0628\u0644\u0627\u0621\u061b \u0644\u0623\u0646\u0647 \u0627\u062e\u062a\u0628\u0627\u0631\u060c \u0648\u0642\u062f \u064a\u0643\u0648\u0646 \u0628\u0627\u0644\u062e\u064a\u0631 \u0643\u0645\u0627 \u064a\u0643\u0648\u0646 \u0628\u0627\u0644\u0634\u0631.",
    "\u0627\u0644\u0645\u062d\u0646\u0629: \u0627\u0644\u0627\u0645\u062a\u062d\u0627\u0646 \u0646\u062d\u0648 \u0627\u0644\u0627\u0628\u062a\u0644\u0627\u0621.",
    "\u0627\u0644\u062a\u0623\u0635\u064a\u0644",
    "\u0642\u0627\u0644 \u062a\u0639\u0627\u0644\u0649:",
    "\u0627\u0644\u0630\u064a \u062e\u0644\u0642 \u0627\u0644\u0645\u0648\u062a \u0648\u0627\u0644\u062d\u064a\u0627\u0629 \u0644\u064a\u0628\u0644\u0648\u0643\u0645 \u0623\u064a\u0643\u0645 \u0623\u062d\u0633\u0646 \u0639\u0645\u0644\u0627 [\u0627\u0644\u0645\u0644\u0643: 2]",
    "\u0643\u0644 \u0646\u0641\u0633 \u0630\u0627\u0626\u0642\u0629 \u0627\u0644\u0645\u0648\u062a \u0648\u0646\u0628\u0644\u0648\u0643\u0645 \u0628\u0627\u0644\u0634\u0631 \u0648\u0627\u0644\u062e\u064a\u0631 \u0641\u062a\u0646\u0629 [\u0627\u0644\u0623\u0646\u0628\u064a\u0627\u0621: 35]",
    "\u0648\u0644\u0646\u0628\u0644\u0648\u0646\u0643\u0645 \u0628\u0634\u064a\u0621 \u0645\u0646 \u0627\u0644\u062e\u0648\u0641... \u0648\u0628\u0634\u0631 \u0627\u0644\u0635\u0627\u0628\u0631\u064a\u0646 [\u0627\u0644\u0628\u0642\u0631\u0629: 155\u2013156]",
    "\u0623\u062d\u0633\u0628 \u0627\u0644\u0646\u0627\u0633 \u0623\u0646 \u064a\u062a\u0631\u0643\u0648\u0627 \u0623\u0646 \u064a\u0642\u0648\u0644\u0648\u0627 \u0622\u0645\u0646\u0627 \u0648\u0647\u0645 \u0644\u0627 \u064a\u0641\u062a\u0646\u0648\u0646 [\u0627\u0644\u0639\u0646\u0643\u0628\u0648\u062a: 2\u20133]",
    "\u0648\u0644\u064a\u0628\u062a\u0644\u064a \u0627\u0644\u0644\u0647 \u0645\u0627 \u0641\u064a \u0635\u062f\u0648\u0631\u0643\u0645 \u0648\u0644\u064a\u0645\u062d\u0635 \u0645\u0627 \u0641\u064a \u0642\u0644\u0648\u0628\u0643\u0645 [\u0622\u0644 \u0639\u0645\u0631\u0627\u0646: 154]",
    "\u0648\u0642\u0627\u0644 \u0635\u0644\u0649 \u0627\u0644\u0644\u0647 \u0639\u0644\u064a\u0647 \u0648\u0633\u0644\u0645:",
    "\u0623\u0634\u062f \u0627\u0644\u0646\u0627\u0633 \u0628\u0644\u0627\u0621 \u0627\u0644\u0623\u0646\u0628\u064a\u0627\u0621 \u062b\u0645 \u0627\u0644\u0623\u0645\u062b\u0644 \u0641\u0627\u0644\u0623\u0645\u062b\u0644...",
    "\u0639\u062c\u0628\u0627 \u0644\u0623\u0645\u0631 \u0627\u0644\u0645\u0624\u0645\u0646... \u0625\u0646 \u0623\u0635\u0627\u0628\u062a\u0647 \u0633\u0631\u0627\u0621 \u0634\u0643\u0631... \u0648\u0625\u0646 \u0623\u0635\u0627\u0628\u062a\u0647 \u0636\u0631\u0627\u0621 \u0635\u0628\u0631 \u0641\u0643\u0627\u0646 \u062e\u064a\u0631\u0627 \u0644\u0647.",
    "\u0645\u0646 \u064a\u0631\u062f \u0627\u0644\u0644\u0647 \u0628\u0647 \u062e\u064a\u0631\u0627 \u064a\u0635\u0628 \u0645\u0646\u0647.",
    "\u062b\u0627\u0646\u064a\u0627: \u0627\u0644\u062d\u0643\u0645\u0629",
    "\u0647\u064a \u0627\u0644\u0646\u062a\u064a\u062c\u0629 \u0627\u0644\u062a\u064a \u062a\u0634\u0645\u0644 \u062c\u0645\u064a\u0639 \u0635\u0641\u0627\u062a \u0627\u0644\u0643\u0645\u0627\u0644 \u0625\u0630\u0627 \u0648\u0632\u0646\u062a \u0628\u0627\u0644\u0642\u062f\u0631 \u0627\u0644\u0635\u062d\u064a\u062d...",
    "\u0642\u064a\u0644: \u0627\u0644\u062d\u0643\u0645\u0629 \u0639\u0628\u0627\u0631\u0629 \u0639\u0646 \u0645\u0639\u0631\u0641\u0629 \u0623\u0641\u0636\u0644 \u0627\u0644\u0623\u0634\u064a\u0627\u0621 \u0628\u0623\u0641\u0636\u0644 \u0627\u0644\u0639\u0644\u0648\u0645.",
    "\u0627\u0644\u062d\u0643\u0645\u0629: \u0625\u0635\u0627\u0628\u0629 \u0627\u0644\u062d\u0642 \u0628\u0627\u0644\u0639\u0644\u0645 \u0648\u0627\u0644\u0639\u0642\u0644... \u0648\u0645\u0646 \u0627\u0644\u0625\u0646\u0633\u0627\u0646: \u0645\u0639\u0631\u0641\u0629 \u0627\u0644\u0645\u0648\u062c\u0648\u062f\u0627\u062a \u0648\u0641\u0639\u0644 \u0627\u0644\u062e\u064a\u0631\u0627\u062a.",
    "\u0627\u0644\u062a\u0623\u0635\u064a\u0644",
    "\u0642\u0627\u0644 \u062a\u0639\u0627\u0644\u0649:",
    "\u064a\u0624\u062a\u064a \u0627\u0644\u062d\u0643\u0645\u0629 \u0645\u0646 \u064a\u0634\u0627\u0621 \u0648\u0645\u0646 \u064a\u0624\u062a \u0627\u0644\u062d\u0643\u0645\u0629 \u0641\u0642\u062f \u0623\u0648\u062a\u064a \u062e\u064a\u0631\u0627 \u0643\u062b\u064a\u0631\u0627 [\u0627\u0644\u0628\u0642\u0631\u0629: 269]",
    "\u0627\u062f\u0639\u064f \u0625\u0644\u0649 \u0633\u0628\u064a\u0644 \u0631\u0628\u0643 \u0628\u0627\u0644\u062d\u0643\u0645\u0629 \u0648\u0627\u0644\u0645\u0648\u0639\u0638\u0629 \u0627\u0644\u062d\u0633\u0646\u0629 [\u0627\u0644\u0646\u062d\u0644: 125]",
    "\u0630\u0644\u0643 \u0645\u0645\u0627 \u0623\u0648\u062d\u0649 \u0625\u0644\u064a\u0643 \u0631\u0628\u0643 \u0645\u0646 \u0627\u0644\u062d\u0643\u0645\u0629 [\u0627\u0644\u0625\u0633\u0631\u0627\u0621: 39]",
]

# --- Screenshot 3: Ø¥Ø¶Ø§ÙØ§Øª Ù„Ù„Ø­ÙƒÙ…Ø© (Ø¢ÙŠØ§Øª/Ø£Ø­Ø§Ø¯ÙŠØ«) ---
lines_3 = [
    "\u0648\u0644\u0642\u062f \u0622\u062a\u064a\u0646\u0627 \u0644\u0642\u0645\u0627\u0646 \u0627\u0644\u062d\u0643\u0645\u0629 [\u0644\u0642\u0645\u0627\u0646: 12]",
    "\u0648\u064a\u0639\u0644\u0645\u0647 \u0627\u0644\u0643\u062a\u0627\u0628 \u0648\u0627\u0644\u062d\u0643\u0645\u0629 [\u0622\u0644 \u0639\u0645\u0631\u0627\u0646: 48]",
    "\u064a\u062a\u0644\u0648 \u0639\u0644\u064a\u0647\u0645 \u0622\u064a\u0627\u062a\u0647 \u0648\u064a\u0632\u0643\u064a\u0647\u0645 \u0648\u064a\u0639\u0644\u0645\u0647\u0645 \u0627\u0644\u0643\u062a\u0627\u0628 \u0648\u0627\u0644\u062d\u0643\u0645\u0629 [\u0627\u0644\u0628\u0642\u0631\u0629: 151]",
    "\u0648\u0627\u0630\u0643\u0631\u0646 \u0645\u0627 \u064a\u062a\u0644\u0649 \u0641\u064a \u0628\u064a\u0648\u062a\u0643\u0646 \u0645\u0646 \u0622\u064a\u0627\u062a \u0627\u0644\u0644\u0647 \u0648\u0627\u0644\u062d\u0643\u0645\u0629 [\u0627\u0644\u0623\u062d\u0632\u0627\u0628: 34]",
    "\u0648\u0642\u0627\u0644 \u0635\u0644\u0649 \u0627\u0644\u0644\u0647 \u0639\u0644\u064a\u0647 \u0648\u0633\u0644\u0645:",
    "\u0625\u0646 \u0645\u0646 \u0627\u0644\u0634\u0639\u0631 \u062d\u0643\u0645\u0629 \u2014 \u0635\u062d\u064a\u062d \u0627\u0644\u0628\u062e\u0627\u0631\u064a (\u0643\u062a\u0627\u0628 \u0627\u0644\u0623\u062f\u0628)\u060c \u0648\u0635\u062d\u064a\u062d \u0645\u0633\u0644\u0645 (\u0643\u062a\u0627\u0628 \u0627\u0644\u0634\u0639\u0631)",
    "\u0645\u0646 \u064a\u0631\u062f \u0627\u0644\u0644\u0647 \u0628\u0647 \u062e\u064a\u0631\u0627 \u064a\u0641\u0642\u0647\u0647 \u0641\u064a \u0627\u0644\u062f\u064a\u0646 \u2014 \u0635\u062d\u064a\u062d \u0627\u0644\u0628\u062e\u0627\u0631\u064a (\u0643\u062a\u0627\u0628 \u0627\u0644\u0639\u0644\u0645)\u060c \u0648\u0635\u062d\u064a\u062d \u0645\u0633\u0644\u0645.",
]

p1 = write_payload('intellectual_tajarrud_istiqlaliyyah_01', lines_1)
p2 = write_payload('intellectual_ikhtibar_imtihan_ibtila_02', lines_2)
p3 = write_payload('intellectual_hikmah_evidence_03', lines_3)

print('rewrote', p1)
print('rewrote', p2)
print('rewrote', p3)
print('done')
